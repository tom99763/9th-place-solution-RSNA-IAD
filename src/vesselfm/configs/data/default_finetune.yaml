sample_prop: 1.0
fold_idx: 0
file_format: "nii"
image_size: ${input_size}
filter_dataset_IDs: null
input_size: [64, 64, 64]
vol_size: [128, 384, 384]
transforms:
  train:
    - EnsureChannelFirstd:
        keys: [ "Image", "Mask" ]
        channel_dim: "no_channel"
    - EnsureTyped:
        keys: [ "Image", "Mask" ]
    - Resized:
        keys: [ "Image", "Mask" ]
        spatial_size: ${vol_size}
        mode: [ "trilinear", "nearest" ]
    - RandCropByLabelClassesd:
        keys: [ "Image", "Mask" ]
        label_key: "Mask"
        spatial_size: ${input_size}
        num_classes: 13
        ratios: [ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ]
        num_samples: 2
        image_key: "Image"
        allow_smaller: True
#    - RandAffined: # ðŸ”¹ random rotation on X/Y only
#        keys: [ "Image", "Mask" ]
#        mode: [ "bilinear", "nearest" ]
#        prob: 0.2
#        rotate_range: [0.0, 0.26, 0.26]
#        padding_mode: "border"
    - ScaleIntensityd:
        keys: [ "Image" ]
        minv: 0
        maxv: 1
    - SpatialPadd:
        keys: [ "Image", "Mask" ]
        spatial_size: ${input_size}
        mode: "constant"
        method: "symmetric"
    - ConcatItemsd:
        keys: [ "Image", "Mask" ]
        name: [ "Image", "Mask" ]
        dim: 0
    - ToTensord:
        keys: [ "Image", "Mask" ]

  val:
    - EnsureChannelFirstd:
        keys: ["Image", "Mask"]
        channel_dim: "no_channel"
    - EnsureTyped:
        keys: ["Image", "Mask"]
    - Resized:                        # ðŸ”¹ add resize for validation
        keys: ["Image", "Mask"]
        spatial_size: ${vol_size}
        mode: ["trilinear", "nearest"]
    - ScaleIntensityRangePercentilesd:
        keys: ["Image"]
        lower: 2
        upper: 98
        b_min: 0
        b_max: 1
    - ToTensord:
        keys: ["Image", "Mask"]

  test:
    - EnsureChannelFirstd:
        keys: ["Image", "Mask"]
        channel_dim: "no_channel"
    - EnsureTyped:
        keys: ["Image", "Mask"]
    - Resized:                        # ðŸ”¹ add resize for test
        keys: ["Image", "Mask"]
        spatial_size: ${vol_size}
        mode: ["trilinear", "nearest"]
    - ScaleIntensityRangePercentilesd:
        keys: ["Image"]
        lower: 1
        upper: 99
        b_min: 0
        b_max: 1
    - ToTensord:
        keys: ["Image", "Mask"]